<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!-->
<html class="js video no-maskImage placeholder" lang="en"><!--<![endif]--><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <title>(Relatively) quick and easy Gensim example code - William John Bert</title>
  <meta name="author" content="William John Bert">

  
  <meta name="description" content="Here’s some sample code that shows the basic steps necessary to use gensim to create a corpus, train models (log entropy and latent semantic …">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1">

  
  <link rel="canonical" href="http://williamjohnbert.com/2012/05/relatively-quick-and-easy-gensim-example-code/">
  <link href="http://williamjohnbert.com/favicon.png" rel="icon">
  <link href="%28Relatively%29%20quick%20and%20easy%20Gensim%20example%20code%20-%20William%20John%20Bert_files/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
   <link href="%28Relatively%29%20quick%20and%20easy%20Gensim%20example%20code%20-%20William%20John%20Bert_files/data-table.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="%28Relatively%29%20quick%20and%20easy%20Gensim%20example%20code%20-%20William%20John%20Bert_files/jXHR.js" type="text/javascript"></script><script src="%28Relatively%29%20quick%20and%20easy%20Gensim%20example%20code%20-%20William%20John%20Bert_files/ga.js" async="" type="text/javascript"></script><script src="%28Relatively%29%20quick%20and%20easy%20Gensim%20example%20code%20-%20William%20John%20Bert_files/modernizr-2.js"></script>
  <script src="%28Relatively%29%20quick%20and%20easy%20Gensim%20example%20code%20-%20William%20John%20Bert_files/ender.js"></script>
  <script src="%28Relatively%29%20quick%20and%20easy%20Gensim%20example%20code%20-%20William%20John%20Bert_files/octopress.js" type="text/javascript"></script>
  <link href="http://williamjohnbert.com/atom.xml" rel="alternate" title="William John Bert" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="%28Relatively%29%20quick%20and%20easy%20Gensim%20example%20code%20-%20William%20John%20Bert_files/css.css" rel="stylesheet" type="text/css">
<link href="%28Relatively%29%20quick%20and%20easy%20Gensim%20example%20code%20-%20William%20John%20Bert_files/css_002.css" rel="stylesheet" type="text/css">
<link href="%28Relatively%29%20quick%20and%20easy%20Gensim%20example%20code%20-%20William%20John%20Bert_files/css_003.css" rel="stylesheet" type="text/css">


  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1913538-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


<script src="%28Relatively%29%20quick%20and%20easy%20Gensim%20example%20code%20-%20William%20John%20Bert_files/embed.js" async="" type="text/javascript"></script><script src="%28Relatively%29%20quick%20and%20easy%20Gensim%20example%20code%20-%20William%20John%20Bert_files/widgets.js" async="" type="text/javascript"></script><script async="" src="%28Relatively%29%20quick%20and%20easy%20Gensim%20example%20code%20-%20William%20John%20Bert_files/williamjohnbert.json" type="text/javascript"></script><script charset="UTF-8" async="" src="%28Relatively%29%20quick%20and%20easy%20Gensim%20example%20code%20-%20William%20John%20Bert_files/alfie.js"></script></head>

<body data-twttr-rendered="true">
  <header role="banner"><hgroup>
  <h1><a href="http://williamjohnbert.com/">William John Bert</a></h1>
  
    <h2>Loves to write words and code.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://williamjohnbert.com/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input name="q" value="site:williamjohnbert.com" type="hidden">
    <input class="search" name="q" results="0" placeholder="Search" type="text">
  </fieldset><fieldset class="mobile-nav"><select><option value="">Navigate…</option><option value="http://williamjohnbert.com/">» Home</option><option value="http://williamjohnbert.com/about">» About</option><option value="http://williamjohnbert.com/publications">» Publications</option><option value="http://williamjohnbert.com/projects">» Projects</option><option value="http://williamjohnbert.com/blog/archives">» Archives</option><option selected="selected" value="http://williamjohnbert.com/atom.xml">» RSS</option></select></fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="http://williamjohnbert.com/">Home</a></li>
  <li><a href="http://williamjohnbert.com/about">About</a></li>
  <li><a href="http://williamjohnbert.com/publications">Publications</a></li>
  <li><a href="http://williamjohnbert.com/projects">Projects</a></li>
  <li><a href="http://williamjohnbert.com/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">(Relatively) Quick and Easy Gensim Example Code</h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-05-04T04:12:23-04:00" pubdate="" data-updated="true">May 4<span>th</span>, 2012</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Here’s some sample code that shows the 
basic steps necessary to use gensim to create a corpus, train models 
(log entropy and latent semantic analysis), and perform semantic 
similarity comparisons and queries.</p>

<p><a href="http://radimrehurek.com/gensim/">gensim</a> has an excellent
 tutorial, and this does not replace reading and understanding it. 
Nonetheless, this may be helpful for those interested in doing some 
quick experimentation and getting their hands dirty fast. It takes you 
from training corpus to index and queries in about 100 lines of code, 
much of which is documentation.</p>

<p>Note that this code <strong>will not work out of the box</strong>. To
 train the models, you need to provide your own background corpus (a 
collection of documents, where a document can range from one sentence up
 to multiple pages of text). Choosing a good corpus is an art; 
generally, you want tens of thousands of documents that are 
representative of your problem domain. Like the gensim tutorial, this 
code also shows how to build a corpus from Wikipedia for 
experimentation, though note that doing so require a lot of computing 
time. You could potentially <a href="http://williamjohnbert.com/2012/03/how-to-install-accelerated-blas-into-a-python-virtualenv/">save hours by installing accelerated BLAS on your system</a>.</p>

<!-- more -->




<figure class="code"><figcaption><span>Gensim sample code  </span></figcaption>
 <div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
<span class="line-number">45</span>
<span class="line-number">46</span>
<span class="line-number">47</span>
<span class="line-number">48</span>
<span class="line-number">49</span>
<span class="line-number">50</span>
<span class="line-number">51</span>
<span class="line-number">52</span>
<span class="line-number">53</span>
<span class="line-number">54</span>
<span class="line-number">55</span>
<span class="line-number">56</span>
<span class="line-number">57</span>
<span class="line-number">58</span>
<span class="line-number">59</span>
<span class="line-number">60</span>
<span class="line-number">61</span>
<span class="line-number">62</span>
<span class="line-number">63</span>
<span class="line-number">64</span>
<span class="line-number">65</span>
<span class="line-number">66</span>
<span class="line-number">67</span>
<span class="line-number">68</span>
<span class="line-number">69</span>
<span class="line-number">70</span>
<span class="line-number">71</span>
<span class="line-number">72</span>
<span class="line-number">73</span>
<span class="line-number">74</span>
<span class="line-number">75</span>
<span class="line-number">76</span>
<span class="line-number">77</span>
<span class="line-number">78</span>
<span class="line-number">79</span>
<span class="line-number">80</span>
<span class="line-number">81</span>
<span class="line-number">82</span>
<span class="line-number">83</span>
<span class="line-number">84</span>
<span class="line-number">85</span>
<span class="line-number">86</span>
<span class="line-number">87</span>
<span class="line-number">88</span>
<span class="line-number">89</span>
<span class="line-number">90</span>
<span class="line-number">91</span>
<span class="line-number">92</span>
<span class="line-number">93</span>
<span class="line-number">94</span>
<span class="line-number">95</span>
<span class="line-number">96</span>
<span class="line-number">97</span>
<span class="line-number">98</span>
<span class="line-number">99</span>
<span class="line-number">100</span>
<span class="line-number">101</span>
<span class="line-number">102</span>
<span class="line-number">103</span>
<span class="line-number">104</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="kn">import</span> <span class="nn">logging</span><span class="o">,</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">pprint</span>
</span><span class="line">
</span><span class="line"><span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">stream</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="c">### Generating a training/background corpus from your own source of documents</span>
</span><span class="line"><span class="kn">from</span> <span class="nn">gensim.corpora</span> <span class="kn">import</span> <span class="n">TextCorpus</span><span class="p">,</span> <span class="n">MmCorpus</span><span class="p">,</span> <span class="n">Dictionary</span>
</span><span class="line">
</span><span class="line"><span class="c"># gensim docs: "Provide a filename or a file-like object as input and TextCorpus will be initialized with a</span>
</span><span class="line"><span class="c"># dictionary in `self.dictionary`and will support the `iter` corpus method. For other kinds of corpora, you only</span>
</span><span class="line"><span class="c"># need to override `get_texts` and provide your own implementation."</span>
</span><span class="line"><span class="n">background_corpus</span> <span class="o">=</span> <span class="n">TextCorpus</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="n">YOUR_CORPUS</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="c"># Important -- save the dictionary generated by the corpus, or future operations will not be able to map results</span>
</span><span class="line"><span class="c"># back to original words.</span>
</span><span class="line"><span class="n">background_corpus</span><span class="o">.</span><span class="n">dictionary</span><span class="o">.</span><span class="n">save</span><span class="p">(</span>
</span><span class="line">    <span class="s">"my_dict.dict"</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="n">MmCorpus</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="s">"background_corpus.mm"</span><span class="p">,</span>
</span><span class="line">    <span class="n">background_corpus</span><span class="p">)</span>  <span class="c">#  Uses numpy to persist wiki corpus in Matrix Market format. File will be several GBs.</span>
</span><span class="line">
</span><span class="line"><span class="c">### Generating a large training/background corpus using Wikipedia</span>
</span><span class="line"><span class="kn">from</span> <span class="nn">gensim.corpora</span> <span class="kn">import</span> <span class="n">WikiCorpus</span><span class="p">,</span> <span class="n">wikicorpus</span>
</span><span class="line">
</span><span class="line"><span class="n">articles</span> <span class="o">=</span> <span class="s">"enwiki-latest-pages-articles.xml.bz2"</span>  <span class="c"># available from http://en.wikipedia.org/wiki/Wikipedia:Database_download</span>
</span><span class="line">
</span><span class="line"><span class="c"># This will take many hours! Output is Wikipedia in bucket-of-words (BOW) sparse matrix.</span>
</span><span class="line"><span class="n">wiki_corpus</span> <span class="o">=</span> <span class="n">WikiCorpus</span><span class="p">(</span><span class="n">articles</span><span class="p">)</span>
</span><span class="line"><span class="n">wiki_corpus</span><span class="o">.</span><span class="n">dictionary</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">"wiki_dict.dict"</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="n">MmCorpus</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="s">"wiki_corpus.mm"</span><span class="p">,</span> <span class="n">wiki_corpus</span><span class="p">)</span>  <span class="c">#  File will be several GBs.</span>
</span><span class="line">
</span><span class="line"><span class="c">### Working with persisted corpus and dictionary</span>
</span><span class="line"><span class="n">bow_corpus</span> <span class="o">=</span> <span class="n">MmCorpus</span><span class="p">(</span><span class="s">"wiki_corpus.mm"</span><span class="p">)</span>  <span class="c"># Revive a corpus</span>
</span><span class="line">
</span><span class="line"><span class="n">dictionary</span> <span class="o">=</span> <span class="n">Dictionary</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">"wiki_dict.dict"</span><span class="p">)</span>  <span class="c"># Load a dictionary</span>
</span><span class="line">
</span><span class="line"><span class="c">### Transformations among vector spaces</span>
</span><span class="line"><span class="kn">from</span> <span class="nn">gensim.models</span> <span class="kn">import</span> <span class="n">LsiModel</span><span class="p">,</span> <span class="n">LogEntropyModel</span>
</span><span class="line">
</span><span class="line"><span class="n">logent_transformation</span> <span class="o">=</span> <span class="n">LogEntropyModel</span><span class="p">(</span><span class="n">wiki_corpus</span><span class="p">,</span>
</span><span class="line">    <span class="n">id2word</span><span class="o">=</span><span class="n">dictionary</span><span class="p">)</span>  <span class="c"># Log Entropy weights frequencies of all document features in the corpus</span>
</span><span class="line">
</span><span class="line"><span class="n">tokenize_func</span> <span class="o">=</span> <span class="n">wikicorpus</span><span class="o">.</span><span class="n">tokenize</span>  <span class="c"># The tokenizer used to create the Wikipedia corpus</span>
</span><span class="line"><span class="n">document</span> <span class="o">=</span> <span class="s">"Some text to be transformed."</span>
</span><span class="line"><span class="c"># First, tokenize document using the same tokenization as was used on the background corpus, and then convert it to</span>
</span><span class="line"><span class="c"># BOW representation using the dictionary created when generating the background corpus.</span>
</span><span class="line"><span class="n">bow_document</span> <span class="o">=</span> <span class="n">dictionary</span><span class="o">.</span><span class="n">doc2bow</span><span class="p">(</span><span class="n">tokenize_func</span><span class="p">(</span>
</span><span class="line">    <span class="n">document</span><span class="p">))</span>
</span><span class="line"><span class="c"># converts a single document to log entropy representation. document must be in the same vector space as corpus.</span>
</span><span class="line"><span class="n">logent_document</span> <span class="o">=</span> <span class="n">logent_transformation</span><span class="p">[[</span>
</span><span class="line">    <span class="n">bow_document</span><span class="p">]]</span>
</span><span class="line">
</span><span class="line"><span class="c"># Transform arbitrary documents by getting them into the same BOW vector space created by your training corpus</span>
</span><span class="line"><span class="n">documents</span> <span class="o">=</span> <span class="p">[</span><span class="s">"Some iterable"</span><span class="p">,</span> <span class="s">"containing multiple"</span><span class="p">,</span> <span class="s">"documents"</span><span class="p">,</span> <span class="s">"..."</span><span class="p">]</span>
</span><span class="line"><span class="n">bow_documents</span> <span class="o">=</span> <span class="p">(</span><span class="n">dictionary</span><span class="o">.</span><span class="n">doc2bow</span><span class="p">(</span>
</span><span class="line">    <span class="n">tokenize_func</span><span class="p">(</span><span class="n">document</span><span class="p">))</span> <span class="k">for</span> <span class="n">document</span> <span class="ow">in</span> <span class="n">documents</span><span class="p">)</span>  <span class="c"># use a generator expression because...</span>
</span><span class="line"><span class="n">logent_documents</span> <span class="o">=</span> <span class="n">logent_transformation</span><span class="p">[</span>
</span><span class="line">                   <span class="n">bow_documents</span><span class="p">]</span>  <span class="c"># ...transformation is done during iteration of documents using generators, so this uses constant memory</span>
</span><span class="line">
</span><span class="line"><span class="c">### Chained transformations</span>
</span><span class="line"><span class="c"># This builds a new corpus from iterating over documents of bow_corpus as transformed to log entropy representation.</span>
</span><span class="line"><span class="c"># Will also take many hours if bow_corpus is the Wikipedia corpus created above.</span>
</span><span class="line"><span class="n">logent_corpus</span> <span class="o">=</span> <span class="n">MmCorpus</span><span class="p">(</span><span class="n">corpus</span><span class="o">=</span><span class="n">logent_transformation</span><span class="p">[</span><span class="n">bow_corpus</span><span class="p">])</span>
</span><span class="line">
</span><span class="line"><span class="c"># Creates LSI transformation model from log entropy corpus representation. Takes several hours with Wikipedia corpus.</span>
</span><span class="line"><span class="n">lsi_transformation</span> <span class="o">=</span> <span class="n">LsiModel</span><span class="p">(</span><span class="n">corpus</span><span class="o">=</span><span class="n">logent_corpus</span><span class="p">,</span> <span class="n">id2word</span><span class="o">=</span><span class="n">dictionary</span><span class="p">,</span>
</span><span class="line">    <span class="n">num_features</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="c"># Alternative way of performing same operation as above, but with implicit chaining</span>
</span><span class="line"><span class="c"># lsi_transformation = LsiModel(corpus=logent_transformation[bow_corpus], id2word=dictionary,</span>
</span><span class="line"><span class="c">#    num_features=400)</span>
</span><span class="line">
</span><span class="line"><span class="c"># Can persist transformation models, too.</span>
</span><span class="line"><span class="n">logent_transformation</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">"logent.model"</span><span class="p">)</span>
</span><span class="line"><span class="n">lsi_transformation</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">"lsi.model"</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="c">### Similarities (the best part)</span>
</span><span class="line"><span class="kn">from</span> <span class="nn">gensim.similarities</span> <span class="kn">import</span> <span class="n">Similarity</span>
</span><span class="line">
</span><span class="line"><span class="c"># This index corpus consists of what you want to compare future queries against</span>
</span><span class="line"><span class="n">index_documents</span> <span class="o">=</span> <span class="p">[</span><span class="s">"A bear walked in the dark forest."</span><span class="p">,</span>
</span><span class="line">             <span class="s">"Tall trees have many more leaves than short bushes."</span><span class="p">,</span>
</span><span class="line">             <span class="s">"A starship may someday travel across vast reaches of space to other stars."</span><span class="p">,</span>
</span><span class="line">             <span class="s">"Difference is the concept of how two or more entities are not the same."</span><span class="p">]</span>
</span><span class="line"><span class="c"># A corpus can be anything, as long as iterating over it produces a representation of the corpus documents as vectors.</span>
</span><span class="line"><span class="n">corpus</span> <span class="o">=</span> <span class="p">(</span><span class="n">dictionary</span><span class="o">.</span><span class="n">doc2bow</span><span class="p">(</span><span class="n">tokenize_func</span><span class="p">(</span><span class="n">document</span><span class="p">))</span> <span class="k">for</span> <span class="n">document</span> <span class="ow">in</span> <span class="n">index_documents</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="n">index</span> <span class="o">=</span> <span class="n">Similarity</span><span class="p">(</span><span class="n">corpus</span><span class="o">=</span><span class="n">lsi_transformation</span><span class="p">[</span><span class="n">logent_transformation</span><span class="p">[</span><span class="n">corpus</span><span class="p">]],</span> <span class="n">num_features</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">output_prefix</span><span class="o">=</span><span class="s">"shard"</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="k">print</span> <span class="s">"Index corpus:"</span>
</span><span class="line"><span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">documents</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="k">print</span> <span class="s">"Similarities of index corpus documents to one another:"</span>
</span><span class="line"><span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">([</span><span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">index</span><span class="p">])</span>
</span><span class="line">
</span><span class="line"><span class="n">query</span> <span class="o">=</span> <span class="s">"In the face of ambiguity, refuse the temptation to guess."</span>
</span><span class="line"><span class="n">sims_to_query</span> <span class="o">=</span> <span class="n">index</span><span class="p">[</span><span class="n">lsi_transformation</span><span class="p">[</span><span class="n">logent_transformation</span><span class="p">[</span><span class="n">dictionary</span><span class="o">.</span><span class="n">doc2bow</span><span class="p">(</span><span class="n">tokenize_func</span><span class="p">(</span><span class="n">query</span><span class="p">))]]]</span>
</span><span class="line"><span class="k">print</span> <span class="s">"Similarities of index corpus documents to '</span><span class="si">%s</span><span class="s">'"</span> <span class="o">%</span> <span class="n">query</span>
</span><span class="line"><span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">sims_to_query</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="n">best_score</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">sims_to_query</span><span class="p">)</span>
</span><span class="line"><span class="n">index</span> <span class="o">=</span> <span class="n">sims_to_query</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">best_score</span><span class="p">)</span>
</span><span class="line"><span class="n">most_similar_doc</span> <span class="o">=</span> <span class="n">documents</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
</span><span class="line"><span class="k">print</span> <span class="s">"The document most similar to the query is '</span><span class="si">%s</span><span class="s">' with a score of </span><span class="si">%.2f</span><span class="s">."</span> <span class="o">%</span> <span class="p">(</span><span class="n">most_similar_doc</span><span class="p">,</span> <span class="n">best_score</span><span class="p">)</span>
</span></code></pre></td></tr></tbody></table></div></figure>



</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">William John Bert</span></span>

      








  


<time datetime="2012-05-04T04:12:23-04:00" pubdate="" data-updated="true">May 4<span>th</span>, 2012</time>
      

<span class="categories">
  
    <a class="category" href="http://williamjohnbert.com/categories/cool-stuff/">Cool Stuff</a>, <a class="category" href="http://williamjohnbert.com/categories/interests/">Interests</a>, <a class="category" href="http://williamjohnbert.com/categories/programming/">Programming</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <iframe style="width: 107px; height: 20px;" data-twttr-rendered="true" title="Twitter Tweet Button" class="twitter-share-button twitter-tweet-button twitter-count-horizontal" src="%28Relatively%29%20quick%20and%20easy%20Gensim%20example%20code%20-%20William%20John%20Bert_files/tweet_button.html" allowtransparency="true" id="twitter-widget-0" frameborder="0" scrolling="no"></iframe>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="http://williamjohnbert.com/2012/05/an-introduction-to-gensim-topic-modelling-for-humans/" title="Previous Post: An Introduction to gensim: " topic="" modelling="" for="" humans""="">« An Introduction to gensim: "Topic Modelling for Humans"</a>
      
      
        <a class="basic-alignment right" href="http://williamjohnbert.com/2012/10/a-case-study-of-node-js-in-production/" title="Next Post: A Case Study of Node.js in Production">A Case Study of Node.js in Production »</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><iframe verticalscrolling="no" horizontalscrolling="no" src="%28Relatively%29%20quick%20and%20easy%20Gensim%20example%20code%20-%20William%20John%20Bert_files/a.html" style="width: 100% ! important; border: medium none ! important; overflow: hidden ! important; height: 487px ! important;" role="complementary" allowtransparency="true" data-disqus-uid="2" id="dsq2" frameborder="0" scrolling="no" width="100%"></iframe></div>
  </section>

</div>

<aside class="sidebar thirds">
  
    <section class="first odd">
  <ul id="recent_posts">
      <li class="post">
      <a href="http://williamjohnbert.com/" alt="Home"><img src="%28Relatively%29%20quick%20and%20easy%20Gensim%20example%20code%20-%20William%20John%20Bert_files/Home.png"></a>
      <a href="http://williamjohnbert.com/archives/" alt="Archives"><img src="%28Relatively%29%20quick%20and%20easy%20Gensim%20example%20code%20-%20William%20John%20Bert_files/Calendar.png"></a>
      <a href="mailto:" alt="E-Mail"><img src="%28Relatively%29%20quick%20and%20easy%20Gensim%20example%20code%20-%20William%20John%20Bert_files/Envelope.png"></a>
      <a href="http://williamjohnbert.com/atom.xml" alt="subscribe feed"><img src="%28Relatively%29%20quick%20and%20easy%20Gensim%20example%20code%20-%20William%20John%20Bert_files/rss_big.png"></a>
      </li>
  </ul>
</section>
<section class="even">
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="http://williamjohnbert.com/2013/09/why-chrome-sometimes-sends-the-same-post-multiple-times/">How legit HTTP (with an async io assist) massacred my Node workers</a>
      </li>
    
      <li class="post">
        <a href="http://williamjohnbert.com/2013/06/allow-cors-with-localhost-in-chrome/">Allow CORS with localhost in Chrome</a>
      </li>
    
      <li class="post">
        <a href="http://williamjohnbert.com/2013/05/emacs-cl-lib-madness/">Emacs cl-lib madness</a>
      </li>
    
      <li class="post">
        <a href="http://williamjohnbert.com/2013/05/juxtaposition/">Juxtaposition</a>
      </li>
    
      <li class="post">
        <a href="http://williamjohnbert.com/2013/01/reprise-of-zero-to-node/">Zero to Node, Again</a>
      </li>
    
  </ul>
</section>

<section class="odd">
  <h1>GitHub Repos</h1>
  <ul id="gh_repos"><li><a href="https://github.com/sandinmyjoints/.emacs.d">.emacs.d</a><p>.emacs.d contents</p></li><li><a href="https://github.com/sandinmyjoints/muchtolearn">muchtolearn</a><p></p></li><li><a href="https://github.com/sandinmyjoints/kara-site">kara-site</a><p></p></li><li><a href="https://github.com/sandinmyjoints/requests-review">requests-review</a><p>Review of Requests API.</p></li><li><a href="https://github.com/sandinmyjoints/gensimtalk">gensimtalk</a><p>Sample
 code and slides for a talk about gensim, a topic modelling framework 
written in Python, that I gave at the DC Python Meetup on May 1, 2012.</p></li></ul>
  
  <a href="https://github.com/sandinmyjoints">@sandinmyjoints</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'sandinmyjoints',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="%28Relatively%29%20quick%20and%20easy%20Gensim%20example%20code%20-%20William%20John%20Bert_files/github.js" type="text/javascript"> </script>
</section>


<section class="first even">
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("williamjohnbert", 4, false);
    });
  </script>
  <script src="%28Relatively%29%20quick%20and%20easy%20Gensim%20example%20code%20-%20William%20John%20Bert_files/twitter.js" type="text/javascript"> </script>
  
    <iframe style="width: 151px; height: 20px;" data-twttr-rendered="true" title="Twitter Follow Button" class="twitter-follow-button twitter-follow-button" src="%28Relatively%29%20quick%20and%20easy%20Gensim%20example%20code%20-%20William%20John%20Bert_files/follow_button.html" allowtransparency="true" id="twitter-widget-1" frameborder="0" scrolling="no"></iframe>
  
</section>





  
</aside>


    <span class="toggle-sidebar"></span></div>
  </div>
  <footer role="contentinfo"><p>
  Copyright © 2013 - William John Bert -
  <span class="credit">Powered by <a href="http://octopress.org/">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'wjb';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://williamjohnbert.com/2012/05/relatively-quick-and-easy-gensim-example-code/';
        var disqus_url = 'http://williamjohnbert.com/2012/05/relatively-quick-and-easy-gensim-example-code/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>







</body></html>